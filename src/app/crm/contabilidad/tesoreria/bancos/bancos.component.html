<div class="auth-box card">
    <div class="card-block">
        <h4 class="sub-title m-t-20">Bancos</h4>
        <div class="row">
            <div class="col-md-12 m-b-10">
                <button type="button" class="btn btn-info btn-sm" (click)="openModal(modalBanco)">
                    <i class="fa fa-plus"></i> Nuevo banco
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 table-responsive">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>Clave</th>
                        <th>Nombre</th>
                        <th>RFC</th>
                        <th>Código SAT</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let banco of bancos">
                        <td>{{ banco.valor }}</td>
                        <td>{{ banco.razon_social }}</td>
                        <td>{{ banco.rfc }}</td>
                        <td>{{ banco.codigo_sat }}</td>
                        <td>
                            <button class="btn btn-outline-primary btn-action mr-1" style="padding: 4px 10px; font-size: 1.1rem;" (click)="openModal(modalBanco, banco)">
                                <i class="fa fa-pen"></i>
                            </button>
                            <button class="btn btn-outline-danger btn-action" style="padding: 4px 10px; font-size: 1.1rem;" (click)="eliminar(banco)">
                                <i class="fa fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr *ngIf="bancos.length === 0">
                        <td colspan="5" class="text-center">Sin bancos registrados</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal crear/editar banco -->
<ng-template #modalBanco let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">{{ data.id ? 'Editar' : 'Nuevo' }} banco</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form class="md-float-material form-material" #formBanco="ngForm" (ngSubmit)="guardarBanco(c)">
        <div class="modal-body">
            <div class="row">
                <div class="col-md-6 m-b-10">
                    <div class="form-group form-primary">
                        <input type="text" class="form-control" name="valor" [(ngModel)]="data.valor" required maxlength="10">
                        <span class="form-bar"></span>
                        <label class="float-label">Clave</label>
                        <small class="text-danger messages block" *ngIf="formBanco.submitted && !data.valor">Campo requerido</small>
                    </div>
                </div>
                <div class="col-md-6 m-b-10">
                    <div class="form-group form-primary">
                        <input type="text" class="form-control" name="razon_social" [(ngModel)]="data.razon_social" required maxlength="150">
                        <span class="form-bar"></span>
                        <label class="float-label">Nombre</label>
                        <small class="text-danger messages block" *ngIf="formBanco.submitted && !data.razon_social">Campo requerido</small>
                    </div>
                </div>
                <div class="col-md-6 m-b-10">
                    <div class="form-group form-primary">
                        <input type="text" class="form-control" name="rfc" [(ngModel)]="data.rfc" maxlength="15">
                        <span class="form-bar"></span>
                        <label class="float-label">RFC</label>
                    </div>
                </div>
                <div class="col-md-6 m-b-10">
                    <div class="form-group form-primary">
                        <input type="text" class="form-control" name="codigo_sat" [(ngModel)]="data.codigo_sat" maxlength="10">
                        <span class="form-bar"></span>
                        <label class="float-label">Código SAT</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer" style="border-top: none;">
            <button type="submit" class="btn btn-info btn-block" [disabled]="formBanco.invalid">
                <i class="fa fa-save"></i> Guardar
            </button>
        </div>
    </form>
</ng-template>
