<div class="page-body">
    <div class="row">
        <!-- customer project  start -->
        <div class="col-xl-3 col-md-6">
            <div class="card">
                <div class="card-block">
                    <div class="row align-items-center m-l-0">
                        <div class="col-auto">
                            <i
                                class="fa fa-shopping-cart f-30 text-c-purple"
                            ></i>
                        </div>
                        <div class="col-auto">
                            <h6 class="text-muted m-b-10">Total de ventas</h6>
                            <h3 class="m-b-0">{{ ventas_totales }}</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card">
                <div class="card-block">
                    <div class="row align-items-center m-l-0">
                        <div class="col-auto">
                            <h6 class="text-muted m-b-10">
                                Pendientes de finalizar
                            </h6>
                            <h3 class="m-b-0">
                                {{ ventas_pendientes_finalizar }}
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card">
                <div class="card-block">
                    <div class="row align-items-center m-l-0">
                        <div class="col-auto">
                            <i class="fa fa-balance-scale f-30 text-c-red"></i>
                        </div>
                        <div class="col-auto">
                            <h6 class="text-muted m-b-10">Breath</h6>
                            <h3
                                class="m-b-0 {{
                                    diferencia_ventas_mes < 1
                                        ? 'text-c-red'
                                        : 'text-c-green'
                                }}"
                            >
                                {{
                                    diferencia_ventas_mes > 0
                                        ? "+" + diferencia_ventas_mes
                                        : diferencia_ventas_mes
                                }}
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card">
                <div class="card-block">
                    <div class="row align-items-center m-l-0">
                        <div class="col-auto">
                            <i class="fa fa-balance-scale f-30 text-c-blue"></i>
                        </div>
                        <div class="col-auto">
                            <h6 class="text-muted m-b-10">Mes actual</h6>
                            <h3 class="m-b-0">{{ ventas_mes_actual }}</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="row m-t-30">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>Crear ticket para administradores</h5>
                </div>
                <div class="card-block">
                    <form class="form-material">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group form-primary">
                                    <input
                                        multiple
                                        id="archivos"
                                        type="file"
                                        #file
                                        class="form-control ngb-drop-zone text-center ripple light"
                                        accept="image/png, image/jpeg"
                                        (change)="agregarArchivo($event)"
                                    />
                                    <span class="form-bar"></span>
                                    <label class="float-label">Evidencia</label>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group form-primary">
                                    <input
                                        type="text"
                                        name="titulo"
                                        class="form-control"
                                        [(ngModel)]="tarea.titulo"
                                        maxlength="50"
                                        required
                                    />
                                    <span class="form-bar"></span>
                                    <label class="float-label">Titulo</label>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="right-icon-control">
                                    <div class="form-group form-primary">
                                        <textarea
                                            type="text"
                                            name="tarea"
                                            class="form-control"
                                            [(ngModel)]="tarea.descripcion"
                                            required
                                        ></textarea>
                                        <span class="form-bar"></span>
                                        <label class="float-label"
                                            >DescripciÃ³n</label
                                        >
                                    </div>
                                    <div class="form-icon">
                                        <button
                                            class="btn btn-success btn-icon waves-effect waves-light"
                                            (click)="crearTarea($event)"
                                        >
                                            <i class="fa fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6" *ngIf="esAdmin()">
            <div class="card">
                <div class="card-header">
                    <h5>Lista de tareas pendientes</h5>
                </div>
                <div class="card-block">
                    <section id="task-container">
                        <ul id="task-list">
                            <ng-container *ngFor="let ticket of tickets">
                                <li
                                    style="
                                        width: 100% !important;
                                        cursor: default !important;
                                    "
                                >
                                    <p>
                                        <b>{{ ticket.titulo }}</b>
                                    </p>
                                    <p [innerHTML]="ticket.descripcion"></p>
                                    <p
                                        class="link"
                                        *ngIf="ticket.evidencia != ''"
                                        (click)="descargarArchivo(ticket.id)"
                                    >
                                        Descargar evidencia
                                    </p>
                                    <small
                                        class="text-success messages block"
                                        >{{
                                            ticket.nombre +
                                                " - " +
                                                ticket.created_at
                                        }}</small
                                    >
                                    <button
                                        class="btn btn-outline-info btn-sm m-t-10 btn-block"
                                        (click)="terminarTarea(ticket.id)"
                                    >
                                        Terminar tarea
                                    </button>
                                </li>
                            </ng-container>
                        </ul>
                    </section>
                </div>
            </div>
        </div>

        <div class="col-md-6" *ngIf="!esAdmin()">
            <div class="card">
                <div class="card-header">
                    <h5>Lista de tareas registradas</h5>
                </div>
                <div class="card-block">
                    <section id="task-container">
                        <ul id="task-list">
                            <ng-container
                                *ngFor="let ticket of tickets_personal"
                            >
                                <li
                                    class="{{
                                        !ticket.status ? 'complete' : ''
                                    }}"
                                >
                                    <p>
                                        <b>{{ ticket.titulo }}</b>
                                    </p>
                                    <p [innerHTML]="ticket.descripcion"></p>
                                    <p
                                        class="link"
                                        *ngIf="ticket.evidencia != ''"
                                        (click)="descargarArchivo(ticket.id)"
                                    >
                                        Descargar evidencia
                                    </p>
                                    <small
                                        class="text-success messages block"
                                        >{{
                                            ticket.nombre +
                                                " - " +
                                                ticket.finished_at
                                        }}</small
                                    >
                                    <button
                                        class="btn btn-outline-info btn-sm m-t-10 btn-block"
                                        (click)="eliminarTarea(ticket.id)"
                                    >
                                        Eliminar tarea
                                    </button>
                                </li>
                            </ng-container>
                        </ul>
                    </section>
                </div>
            </div>
        </div>
    </div> -->

    <div class="row">
        <!-- NDC VENTAS -->
        <div class="col-md-4">
            <p *ngIf="puedeVerNdc">
                <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    (click)="cambiarAcordeonVentas(1)"
                    [attr.aria-expanded]="isCollapsedAutorizar"
                    aria-controls="collapseExample"
                >
                    Autorizar Notas De Credito - Ventas
                </button>
                <span
                    *ngIf="pendientesVentas.length > 0"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    style="font-size: 15px"
                >
                    {{ pendientesVentas.length }}
                </span>
            </p>
            <div
                #collapse="ngbCollapse"
                [(ngbCollapse)]="isCollapsedAutorizar"
                [@smoothCollapse]="isCollapsedAutorizar ? 'initial' : 'final'"
            >
                <div class="col-md-12" *ngIf="puedeVerNdc">
                    <div class="card">
                        <div class="card-header">
                            <h5>Autorizaciones pendientes</h5>
                        </div>
                        <div class="card-block">
                            <section id="task-container">
                                <ul id="task-list">
                                    <ng-container
                                        *ngFor="let item of pendientesVentas"
                                    >
                                        <li
                                            style="
                                                width: 100% !important;
                                                cursor: default !important;
                                            "
                                        >
                                            <p>
                                                <b>{{ item.id_documento }}</b>
                                            </p>
                                            <p>
                                                <b>{{ item.no_venta }}</b>
                                            </p>
                                            <p>{{ item.solicitante }}</p>
                                            <small
                                                class="text-success messages block"
                                                >{{ item.created_at }} - Modulo:
                                                {{ item.modulo }}</small
                                            >
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <button
                                                        (click)="
                                                            goToLinkVentas()
                                                        "
                                                        class="btn btn-outline-info btn-sm m-t-10 btn-block"
                                                    >
                                                        Visualizar Solicitud
                                                    </button>
                                                </div>
                                                <div class="col-md-4">
                                                    <button
                                                        (click)="
                                                            autorizarNdc(
                                                                item.id,
                                                                item.id_documento,
                                                                item.modulo
                                                            )
                                                        "
                                                        class="btn btn-outline-success btn-sm m-t-10 btn-block"
                                                    >
                                                        Autorizar Solicitud
                                                    </button>
                                                </div>
                                                <div class="col-md-4">
                                                    <button
                                                        (click)="
                                                            rechazarNdc(
                                                                item.id,
                                                                item.id_documento
                                                            )
                                                        "
                                                        class="btn btn-outline-danger btn-sm m-t-10 btn-block"
                                                    >
                                                        Rechazar Solicitud
                                                    </button>
                                                </div>
                                            </div>
                                        </li>
                                    </ng-container>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- NDC SOPORTE -->
        <div class="col-md-4">
            <p *ngIf="puedeVerNdc">
                <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    (click)="cambiarAcordeonSoporte(1)"
                    [attr.aria-expanded]="isCollapsedAutorizarSoporte"
                    aria-controls="collapseExample"
                >
                    Autorizar Notas De Credito - Soporte
                </button>
                <span
                    *ngIf="pendientesSoporte.length > 0"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    style="font-size: 15px"
                >
                    {{ pendientesSoporte.length }}
                </span>
            </p>
            <div
                #collapse="ngbCollapse"
                [(ngbCollapse)]="isCollapsedAutorizarSoporte"
                [@smoothCollapse]="
                    isCollapsedAutorizarSoporte ? 'initial' : 'final'
                "
            >
                <div class="col-md-12" *ngIf="puedeVerNdc">
                    <div class="card">
                        <div class="card-header">
                            <h5>Autorizaciones pendientes</h5>
                        </div>
                        <div class="card-block">
                            <section id="task-container">
                                <ul id="task-list">
                                    <ng-container
                                        *ngFor="let item of pendientesSoporte"
                                    >
                                        <li
                                            style="
                                                width: 100% !important;
                                                cursor: default !important;
                                            "
                                        >
                                            <p>
                                                <b
                                                    >{{ item.documento }} -
                                                    {{
                                                        item.documento_garantia
                                                    }}</b
                                                >
                                            </p>

                                            <p>{{ item.solicitante }}</p>
                                            <small
                                                class="text-success messages block"
                                                >{{ item.created_at }} - Modulo:
                                                {{
                                                    item.modulo == "D"
                                                        ? "Devoulciones"
                                                        : "Garantias"
                                                }}</small
                                            >
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button
                                                        (click)="
                                                            goToLinkSoporte()
                                                        "
                                                        class="btn btn-outline-info btn-sm m-t-10 btn-block"
                                                    >
                                                        Visualizar Solicitud
                                                    </button>
                                                </div>
                                            </div>
                                        </li>
                                    </ng-container>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- NDC SIN VENTA -->
        <div class="col-md-4">
            <p *ngIf="puedeVerNdc">
                <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    (click)="cambiarAcordeonSinVenta(1)"
                    [attr.aria-expanded]="isCollapsedAutorizarSinVenta"
                    aria-controls="collapseExample"
                >
                    Autorizar Notas De Credito - Sin Venta
                </button>
                <span
                    *ngIf="pendientesSinVenta.length > 0"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    style="font-size: 15px"
                >
                    {{ pendientesSinVenta.length }}
                </span>
            </p>
            <div
                #collapse="ngbCollapse"
                [(ngbCollapse)]="isCollapsedAutorizarSinVenta"
                [@smoothCollapse]="
                    isCollapsedAutorizarSinVenta ? 'initial' : 'final'
                "
            >
                <div class="col-md-12" *ngIf="puedeVerNdc">
                    <div class="card">
                        <div class="card-header">
                            <h5>Autorizaciones pendientes</h5>
                        </div>
                        <div class="card-block">
                            <section id="task-container">
                                <ul id="task-list">
                                    <ng-container
                                        *ngFor="let item of pendientesSinVenta"
                                    >
                                        <li
                                            style="
                                                width: 100% !important;
                                                cursor: default !important;
                                            "
                                        >
                                            <p>
                                                <b>{{ item.id_documento }}</b>
                                            </p>

                                            <p>{{ item.solicitante }}</p>
                                            <small
                                                class="text-success messages block"
                                                >{{ item.created_at }} - Modulo:
                                                {{ item.modulo }}</small
                                            >
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button
                                                        (click)="
                                                            goToLinkSinVenta()
                                                        "
                                                        class="btn btn-outline-info btn-sm m-t-10 btn-block"
                                                    >
                                                        Visualizar Solicitud
                                                    </button>
                                                </div>
                                            </div>
                                        </li>
                                    </ng-container>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ver Solicitudes Ventas-->
        <div class="col-md-6">
            <p *ngIf="!puedeVerNdc">
                <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    (click)="cambiarAcordeonVentas(2)"
                    [attr.aria-expanded]="isCollapsedAutorizaciones"
                    aria-controls="collapseExample"
                >
                    Mis solicitudes
                </button>
                <span
                    *ngIf="misPendientesVentas.length > 0"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    style="font-size: 15px"
                >
                    {{ misPendientesVentas.length }}
                </span>
            </p>
            <div
                #collapse="ngbCollapse"
                [(ngbCollapse)]="isCollapsedAutorizaciones"
                [@smoothCollapse]="
                    isCollapsedAutorizaciones ? 'initial' : 'final'
                "
            >
                <div class="col-md-12" *ngIf="!puedeVerNdc">
                    <div class="card">
                        <div class="card-header">
                            <h5>Autorizaciones pendientes</h5>
                        </div>
                        <div class="card-block">
                            <section id="task-container">
                                <ul id="task-list">
                                    <ng-container
                                        *ngFor="let item of misPendientesVentas"
                                    >
                                        <li
                                            style="
                                                width: 100% !important;
                                                cursor: default !important;
                                            "
                                        >
                                            <p>
                                                ID:
                                                <b>{{ item.id_documento }}</b>
                                            </p>
                                            <p>
                                                Venta:
                                                <b>{{ item.no_venta }}</b>
                                            </p>
                                            <small
                                                class="text-success messages block"
                                                >{{ item.created_at }} - Modulo:
                                                {{ item.modulo }}</small
                                            >
                                        </li>
                                    </ng-container>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ver Solicitudes Soporte-->
        <div class="col-md-6">
            <p *ngIf="!puedeVerNdc">
                <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    (click)="cambiarAcordeonVentas(2)"
                    [attr.aria-expanded]="isCollapsedAutorizacionesSoporte"
                    aria-controls="collapseExample"
                >
                    Mis solicitudes
                </button>
                <span
                    *ngIf="misPendientesSoporte.length > 0"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    style="font-size: 15px"
                >
                    {{ misPendientesSoporte.length }}
                </span>
            </p>
            <div
                #collapse="ngbCollapse"
                [(ngbCollapse)]="isCollapsedAutorizacionesSoporte"
                [@smoothCollapse]="
                    isCollapsedAutorizacionesSoporte ? 'initial' : 'final'
                "
            >
                <div class="col-md-12" *ngIf="!puedeVerNdc">
                    <div class="card">
                        <div class="card-header">
                            <h5>Autorizaciones pendientes</h5>
                        </div>
                        <div class="card-block">
                            <section id="task-container">
                                <ul id="task-list">
                                    <ng-container
                                        *ngFor="
                                            let item of misPendientesSoporte
                                        "
                                    >
                                        <li
                                            style="
                                                width: 100% !important;
                                                cursor: default !important;
                                            "
                                        >
                                            <p>
                                                <b
                                                    >{{ item.documento }} -
                                                    {{
                                                        item.documento_garantia
                                                    }}</b
                                                >
                                            </p>

                                            <small
                                                class="text-success messages block"
                                                >{{ item.created_at }} - Modulo:
                                                {{
                                                    item.modulo == "D"
                                                        ? "Devoulciones"
                                                        : "Garantias"
                                                }}</small
                                            >
                                        </li>
                                    </ng-container>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ver Solicitudes Sin Venta-->
        <div class="col-md-6">
            <p *ngIf="!puedeVerNdc">
                <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    (click)="cambiarAcordeonSinVenta(2)"
                    [attr.aria-expanded]="isCollapsedAutorizacionesSinVenta"
                    aria-controls="collapseExample"
                >
                    Mis solicitudes
                </button>
                <span
                    *ngIf="misPendientesSinVenta.length > 0"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    style="font-size: 15px"
                >
                    {{ misPendientesSinVenta.length }}
                </span>
            </p>
            <div
                #collapse="ngbCollapse"
                [(ngbCollapse)]="isCollapsedAutorizacionesSinVenta"
                [@smoothCollapse]="
                    isCollapsedAutorizacionesSinVenta ? 'initial' : 'final'
                "
            >
                <div class="col-md-12" *ngIf="!puedeVerNdc">
                    <div class="card">
                        <div class="card-header">
                            <h5>Autorizaciones pendientes</h5>
                        </div>
                        <div class="card-block">
                            <section id="task-container">
                                <ul id="task-list">
                                    <ng-container
                                        *ngFor="
                                            let item of misPendientesSinVenta
                                        "
                                    >
                                        <li
                                            style="
                                                width: 100% !important;
                                                cursor: default !important;
                                            "
                                        >
                                            <p>
                                                <b
                                                    >{{ item.id_documento }} -
                                                </b>
                                            </p>

                                            <small
                                                class="text-success messages block"
                                                >{{ item.created_at }} - Modulo:
                                                {{ item.modulo }}</small
                                            >
                                        </li>
                                    </ng-container>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <button class="btn btn-sm btn-danger" (click)="ngOnInit()">GET</button> -->
</div>
