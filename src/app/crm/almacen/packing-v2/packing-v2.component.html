<!--suppress JSUnusedGlobalSymbols, JSUnusedLocalSymbols -->
<div class="row">
    <div class="col-lg-12">
        <div class="md-tabs md-card-tabs">
            <ngb-tabset (tabChange)="cambiarTab($event)">
                <ngb-tab>
                    <ng-template ngbTabTitle>
                        <h5>Surtir pedido</h5>
                    </ng-template>

                    <ng-template ngbTabContent>
                        <div class="m-t-15">
                            <div class="card">
                                <div class="card-header">
                                    <form
                                        class="md-float-material form-material"
                                    >
                                        <div class="row m-t-15">
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div
                                                            class="form-group form-primary"
                                                        >
                                                            <input
                                                                type="text"
                                                                id="documento"
                                                                name="documento"
                                                                class="form-control"
                                                                ondrop="return false"
                                                                [(ngModel)]="
                                                                    documento
                                                                "
                                                                (keydown.enter)="
                                                                    buscarDocumento()
                                                                "
                                                            />
                                                            <span
                                                                class="form-bar"
                                                            ></span>
                                                            <label
                                                                class="float-label"
                                                                >Pedido</label
                                                            >
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6 m-t--15">
                                                <div class="row">
                                                    <div
                                                        class="col-md-4 offset-md-4"
                                                    >
                                                        <button
                                                            class="btn btn-outline-danger btn-lg btn-block"
                                                            placement="top"
                                                            ngbTooltip="Reiniciar"
                                                            (click)="
                                                                reiniciarDatos()
                                                            "
                                                        >
                                                            <i
                                                                class="fa fa-2x fa-redo"
                                                            ></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <button
                                                            [hidden]="!admin"
                                                            class="btn btn-block btn-outline-secondary"
                                                            (click)="
                                                                imprimirPicking()
                                                            "
                                                        >
                                                            Imprimir Picking
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div
                                    class="card-body"
                                    [hidden]="informacion.empresa == ''"
                                >
                                    <form
                                        class="md-float-material form-material"
                                    >
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div
                                                            class="form-horizontal form-bordered"
                                                        >
                                                            <div
                                                                class="form-group group-div"
                                                            >
                                                                <label
                                                                    for=""
                                                                    class="col-form-label col-sm-2"
                                                                    >Empresa</label
                                                                >
                                                                <div
                                                                    class="col-sm-10 inline-block"
                                                                >
                                                                    <h2>
                                                                        {{
                                                                            informacion.empresa
                                                                        }}
                                                                    </h2>
                                                                </div>
                                                            </div>

                                                            <div
                                                                class="form-group group-div"
                                                            >
                                                                <label
                                                                    for=""
                                                                    class="col-form-label col-sm-2"
                                                                    >Almacén</label
                                                                >
                                                                <div
                                                                    class="col-sm-10 inline-block"
                                                                >
                                                                    <h2>
                                                                        {{
                                                                            informacion.almacen
                                                                        }}
                                                                    </h2>
                                                                </div>
                                                            </div>

                                                            <div
                                                                class="form-group group-div"
                                                            >
                                                                <label
                                                                    for=""
                                                                    class="col-form-label col-sm-2"
                                                                    >Paquetería</label
                                                                >
                                                                <div
                                                                    class="col-sm-10 inline-block"
                                                                >
                                                                    <h2>
                                                                        {{
                                                                            informacion.paqueteria
                                                                        }}
                                                                    </h2>
                                                                </div>
                                                            </div>

                                                            <div
                                                                class="form-group group-div"
                                                            >
                                                                <label
                                                                    for=""
                                                                    class="col-form-label col-sm-2"
                                                                    >Marketplace</label
                                                                >
                                                                <div
                                                                    class="col-sm-10 inline-block"
                                                                >
                                                                    <h2>
                                                                        {{
                                                                            informacion.area +
                                                                                " / " +
                                                                                informacion.marketplace
                                                                        }}
                                                                    </h2>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row m-t-50">
                                                    <div class="col-md-6">
                                                        <div
                                                            class="form-group form-primary"
                                                        >
                                                            <input
                                                                type="text"
                                                                id="codigoescaneado"
                                                                name="codigoescaneado"
                                                                class="form-control"
                                                                ondrop="return false"
                                                                [(ngModel)]="
                                                                    codigo_escaneado
                                                                "
                                                                (keydown.enter)="
                                                                    buscarProducto()
                                                                "
                                                            />
                                                            <span
                                                                class="form-bar"
                                                            ></span>
                                                            <label
                                                                class="float-label"
                                                                >Escanear
                                                                codigo</label
                                                            >
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <table
                                                            class="table table-striped disable-text-selection"
                                                        >
                                                            <tbody>
                                                                <tr
                                                                    *ngFor="
                                                                        let row of data.productos
                                                                    "
                                                                >
                                                                    <th
                                                                        *ngIf="
                                                                            row.cantidad_escaneada >
                                                                            0
                                                                        "
                                                                    >
                                                                        <h2>
                                                                            {{
                                                                                row.sku
                                                                            }}
                                                                        </h2>
                                                                    </th>
                                                                    <td
                                                                        *ngIf="
                                                                            row.cantidad_escaneada >
                                                                            0
                                                                        "
                                                                    >
                                                                        <h2
                                                                            class="text-success"
                                                                        >
                                                                            {{
                                                                                row.cantidad_escaneada
                                                                            }}
                                                                        </h2>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                                <div class="row m-t-30">
                                                    <div class="col-md-12">
                                                        <div
                                                            *ngFor="
                                                                let seguimiento of informacion.seguimiento;
                                                                last as isLast
                                                            "
                                                            class="m-t-20 m-b-20"
                                                        >
                                                            <div
                                                                class="media chat-messages"
                                                                *ngIf="isLast"
                                                            >
                                                                <div
                                                                    class="media-body chat-menu-content"
                                                                >
                                                                    <div
                                                                        class=""
                                                                    >
                                                                        <p
                                                                            class="chat-cont"
                                                                        >
                                                                            {{
                                                                                seguimiento.nombre +
                                                                                    " - " +
                                                                                    seguimiento.created_at
                                                                            }}
                                                                        </p>
                                                                        <p
                                                                            class="chat-cont"
                                                                            [innerHTML]="
                                                                                seguimiento.seguimiento
                                                                            "
                                                                        ></p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ngb-tab>

                <ngb-tab>
                    <ng-template ngbTabTitle>
                        <h5>Reimprimir etiqueta</h5>
                    </ng-template>

                    <ng-template ngbTabContent>
                        <div class="m-t-15">
                            <div class="card">
                                <div class="card-body">
                                    <form
                                        class="md-float-material form-material"
                                        autocomplete="off"
                                    >
                                        <div class="row m-t-15">
                                            <div class="col-md-6">
                                                <div
                                                    class="form-group form-primary"
                                                >
                                                    <input
                                                        type="text"
                                                        id="reimpresiondocumento"
                                                        name="reimpresiondocumento"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            reimpresion.documento
                                                        "
                                                        (keydown.enter)="
                                                            reeimprimirDocumento()
                                                        "
                                                    />
                                                    <span
                                                        class="form-bar"
                                                    ></span>
                                                    <label class="float-label"
                                                        >Número de pedido</label
                                                    >
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div
                                                    class="form-group form-primary"
                                                >
                                                    <select
                                                        name="reimpresionimpresora"
                                                        #empresa="ngModel"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            reimpresion.impresora
                                                        "
                                                    >
                                                        <option
                                                            value=""
                                                            disabled
                                                        ></option>
                                                        <option
                                                            value="{{ row.id }}"
                                                            *ngFor="
                                                                let row of impresoras
                                                            "
                                                        >
                                                            {{ row.nombre }}
                                                        </option>
                                                    </select>
                                                    <span
                                                        class="form-bar"
                                                    ></span>
                                                    <label class="float-label"
                                                        >Impresora</label
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ngb-tab>
            </ngb-tabset>
        </div>
    </div>
</div>

<ng-template #modalseries let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h5 class="modal-title">Series</h5>
        <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="onCloseModalSeries()"
        >
            <span aria-hidden="true">
                <i class="fa fa-times fa-2x text-danger"></i>
            </span>
        </button>
    </div>
    <div class="modal-body">
        <form class="md-float-material form-material">
            <div class="row m-t-10">
                <div class="col-md-11">
                    <div class="form-group form-primary">
                        <input
                            type="text"
                            id="serie"
                            name="serie"
                            class="form-control"
                            [(ngModel)]="serie"
                            (keydown.enter)="sanitizeInput(); agregarSerie()"
                        />
                        <span class="form-bar"></span>
                        <label class="float-label">Escanear serie</label>
                    </div>
                </div>

                <div class="col-md-1">
                    <h5 class="text-danger m-t-20">
                        {{ series.length }}
                    </h5>
                </div>
            </div>

            <div class="row m-t-30">
                <div class="col-md-12">
                    <ul class="list-group m-b-20" id="ul_series">
                        <li
                            class="list-group-item"
                            *ngFor="let serie of series"
                        >
                            {{ serie }}
                            <span
                                (click)="eliminarSerie(serie)"
                                class="float-right cursor-pointer text-danger"
                                >Quitar</span
                            >
                        </li>
                    </ul>
                </div>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #modalguia let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h5 class="modal-title">Guía del documento</h5>
        <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="d('Cross click')"
        >
            <span aria-hidden="true">
                <i class="fa fa-times fa-2x text-danger"></i>
            </span>
        </button>
    </div>
    <div class="modal-body">
        <form class="md-float-material form-material">
            <div class="row m-t-10">
                <div class="col-md-12">
                    <div class="form-group form-primary">
                        <input
                            type="text"
                            id="guia"
                            name="guia"
                            class="form-control"
                            [(ngModel)]="logistica.guia"
                            (keydown.enter)="guardarGuia()"
                        />
                        <span class="form-bar"></span>
                        <label class="float-label">Escanear guía</label>
                    </div>
                </div>
            </div>
        </form>
    </div>
</ng-template>
<!-- //f -->
