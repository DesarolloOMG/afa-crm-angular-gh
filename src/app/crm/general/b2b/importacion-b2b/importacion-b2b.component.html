<div class="row">
    <h4 class="card-title">Importar/Actualizar productos del proveedor</h4>
</div>
<div class="card">
    <div class="card-header">
        <form class="md-float-material form-material mt-10" #form="ngForm">
            <div class="row">
                <div class="col-md-5">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group form-primary">
                                <select
                                    name="proveedorid"
                                    class="form-control"
                                    [(ngModel)]="importacion.id"
                                >
                                    <option
                                        value="{{ row.id }}"
                                        *ngFor="let row of proveedores"
                                    >
                                        {{ row.razon_social }}
                                    </option>
                                </select>
                                <span class="form-bar"></span>
                                <label class="float-label">Provedor</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group form-primary">
                                <select
                                    name="proveedormode"
                                    class="form-control"
                                    [(ngModel)]="importacion.mode"
                                >
                                    <option value="1">API</option>
                                    <option value="2">Excel</option>
                                </select>
                                <span class="form-bar"></span>
                                <label class="float-label"
                                    >Modo de importación</label
                                >
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-2">
                    <div class="row">
                        <div class="col-md-12">
                            <button
                                class="btn btn-outline-info btn-sm btn-block http-disabled"
                                placement="top"
                                (click)="importarProductos()"
                            >
                                <i class="fa fa-2x fa-podcast"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="row">
    <h4 class="card-title">Actualizar precios del proveedor</h4>
</div>
<div class="card">
    <div class="card-header">
        <form class="md-float-material form-material mt-10" #form="ngForm">
            <div class="row">
                <div class="col-md-5">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group form-primary">
                                <select
                                    name="actualizacionid"
                                    class="form-control"
                                    [(ngModel)]="actualizacion.id"
                                >
                                    <option
                                        value="{{ row.id }}"
                                        *ngFor="let row of proveedores"
                                    >
                                        {{ row.razon_social }}
                                    </option>
                                </select>
                                <span class="form-bar"></span>
                                <label class="float-label">Provedor</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group form-primary">
                                <select
                                    name="proveedormode"
                                    class="form-control"
                                    [(ngModel)]="actualizacion.mode"
                                >
                                    <option value="1">API</option>
                                    <option value="2">Excel</option>
                                </select>
                                <span class="form-bar"></span>
                                <label class="float-label"
                                    >Modo de importación</label
                                >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="row">
                        <div class="col-md-12">
                            <button
                                class="btn btn-outline-info btn-sm btn-block http-disabled"
                                placement="top"
                                (click)="actualizarPrecios()"
                            >
                                <i class="fa fa-2x fa-refresh"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<ngx-spinner
    bdColor="rgba(51,51,51,0.8)"
    size="medium"
    color="#fff"
    type="ball-scale-multiple"
>
    <p style="font-size: 20px; color: white">{{ loadingTitle }}</p>
</ngx-spinner>

<ng-template #modalImportar let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">{{ excelProveedor.razon_social }}</h4>
        <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="d('Cross click')"
            id="cerrar_modal"
        >
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body table-responsive">
        <form class="md-float-material form-material" autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group form-primary">
                        <a
                            [href]="
                                this.archivosImportacion[this.excelProveedor.id]
                            "
                            class="btn btn-outline-info btn-sm btn-block"
                            placement="right"
                            download
                        >
                            <i class="fa fa-file-download fa-2x"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="row m-t-30">
                <div class="col-md-12">
                    <div class="form-group form-primary">
                        <input
                            type="file"
                            class="form-control"
                            id="cargar_archivo_excel"
                            name="cargar_archivo_excel"
                            (change)="cargarArchivoExcelImportacion()"
                        />
                        <span class="form-bar"></span>
                        <label class="float-label"
                            >Cargar Excel de productos</label
                        >
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group form-primary">
                        <button
                            class="btn btn-info btn-block"
                            (click)="importarProductosExcel()"
                        >
                            Importar
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #modalActualizar let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">{{ excelProveedor.razon_social }}</h4>
        <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="d('Cross click')"
            id="cerrar_modal"
        >
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body table-responsive">
        <form class="md-float-material form-material" autocomplete="off">
            <div class="row">
                <div class="col-md-10">
                    <div class="form-group form-primary">
                        <a
                            [href]="
                                this.archivosActualizacion[
                                    this.excelProveedor.id
                                ]
                            "
                            class="btn btn-outline-info btn-sm btn-block"
                            placement="right"
                            download
                        >
                            <i class="fa fa-file-download fa-2x"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="row m-t-30">
                <div class="col-md-12">
                    <div class="form-group form-primary">
                        <input
                            type="file"
                            class="form-control"
                            id="cargar_archivo_excel"
                            name="cargar_archivo_excel"
                            (change)="cargarArchivoExcelActualizacion()"
                        />
                        <span class="form-bar"></span>
                        <label class="float-label"
                            >Cargar Excel de productos</label
                        >
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group form-primary">
                        <button
                            class="btn btn-info btn-block"
                            (click)="actualizarProductosExcel()"
                        >
                            Importar
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</ng-template>
